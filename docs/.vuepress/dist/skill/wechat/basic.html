<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Justice的博客</title><meta name="description" content="我在感觉良好的状态下进行改变，效果最佳。">
    <link rel="preload" href="/assets/style-aff4c610.css" as="style"><link rel="stylesheet" href="/assets/style-aff4c610.css">
    <link rel="modulepreload" href="/assets/app-cea8d733.js"><link rel="modulepreload" href="/assets/basic.html-99a30290.js"><link rel="modulepreload" href="/assets/basic.html-74a9848e.js"><link rel="prefetch" href="/assets/friends.html-9a33fab7.js" as="script"><link rel="prefetch" href="/assets/index.html-3c6a63ca.js" as="script"><link rel="prefetch" href="/assets/list1.html-3ed6642f.js" as="script"><link rel="prefetch" href="/assets/dontStrave.html-9c8be424.js" as="script"><link rel="prefetch" href="/assets/index.html-82187481.js" as="script"><link rel="prefetch" href="/assets/index.html-8a89db9d.js" as="script"><link rel="prefetch" href="/assets/birthday25.html-040a4bda.js" as="script"><link rel="prefetch" href="/assets/breakdown.html-61d51ea4.js" as="script"><link rel="prefetch" href="/assets/ipad.html-4b857705.js" as="script"><link rel="prefetch" href="/assets/index.html-1c6df66b.js" as="script"><link rel="prefetch" href="/assets/seek.html-86ceb792.js" as="script"><link rel="prefetch" href="/assets/thinks.html-8e3d45ca.js" as="script"><link rel="prefetch" href="/assets/artistsOfLife.html-0f830210.js" as="script"><link rel="prefetch" href="/assets/ElonReeveMuskBiography.html-edaf6c04.js" as="script"><link rel="prefetch" href="/assets/howComputersWork.html-46ae7a9b.js" as="script"><link rel="prefetch" href="/assets/index.html-8bfee024.js" as="script"><link rel="prefetch" href="/assets/TheCafeattheEndoftheWorld.html-f10ccab0.js" as="script"><link rel="prefetch" href="/assets/index.html-5ba4db82.js" as="script"><link rel="prefetch" href="/assets/ai.html-1e2faf92.js" as="script"><link rel="prefetch" href="/assets/btUse.html-cb0aa968.js" as="script"><link rel="prefetch" href="/assets/gitBasic.html-08556a0f.js" as="script"><link rel="prefetch" href="/assets/clean.html-338dae69.js" as="script"><link rel="prefetch" href="/assets/forceUpdate.html-85721eb3.js" as="script"><link rel="prefetch" href="/assets/interview.html-5d4d1890.js" as="script"><link rel="prefetch" href="/assets/js.html-6526bd9b.js" as="script"><link rel="prefetch" href="/assets/basic.html-96c085f2.js" as="script"><link rel="prefetch" href="/assets/index.html-403a881b.js" as="script"><link rel="prefetch" href="/assets/search.html-cad67925.js" as="script"><link rel="prefetch" href="/assets/tp.html-6da96263.js" as="script"><link rel="prefetch" href="/assets/configuration.html-7712882e.js" as="script"><link rel="prefetch" href="/assets/index.html-abf4c4d1.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/friends.html-1308b7ac.js" as="script"><link rel="prefetch" href="/assets/index.html-3e4bd1a8.js" as="script"><link rel="prefetch" href="/assets/list1.html-1e1e12db.js" as="script"><link rel="prefetch" href="/assets/dontStrave.html-200759f3.js" as="script"><link rel="prefetch" href="/assets/index.html-5b54d082.js" as="script"><link rel="prefetch" href="/assets/index.html-bcfa6911.js" as="script"><link rel="prefetch" href="/assets/birthday25.html-2b9a34e9.js" as="script"><link rel="prefetch" href="/assets/breakdown.html-80171838.js" as="script"><link rel="prefetch" href="/assets/ipad.html-228e5e25.js" as="script"><link rel="prefetch" href="/assets/index.html-e5e7a937.js" as="script"><link rel="prefetch" href="/assets/seek.html-dc3dc7c1.js" as="script"><link rel="prefetch" href="/assets/thinks.html-ff01ff18.js" as="script"><link rel="prefetch" href="/assets/artistsOfLife.html-2acad263.js" as="script"><link rel="prefetch" href="/assets/ElonReeveMuskBiography.html-0d0a5e26.js" as="script"><link rel="prefetch" href="/assets/howComputersWork.html-016c880e.js" as="script"><link rel="prefetch" href="/assets/index.html-ea07beec.js" as="script"><link rel="prefetch" href="/assets/TheCafeattheEndoftheWorld.html-b47cdb1b.js" as="script"><link rel="prefetch" href="/assets/index.html-f2dff563.js" as="script"><link rel="prefetch" href="/assets/ai.html-092bbc8a.js" as="script"><link rel="prefetch" href="/assets/btUse.html-03023d58.js" as="script"><link rel="prefetch" href="/assets/gitBasic.html-faa8ad0a.js" as="script"><link rel="prefetch" href="/assets/clean.html-69c20268.js" as="script"><link rel="prefetch" href="/assets/forceUpdate.html-8e6e3b5d.js" as="script"><link rel="prefetch" href="/assets/interview.html-2b4723d0.js" as="script"><link rel="prefetch" href="/assets/js.html-e799d472.js" as="script"><link rel="prefetch" href="/assets/basic.html-5f4073a7.js" as="script"><link rel="prefetch" href="/assets/index.html-fa47b335.js" as="script"><link rel="prefetch" href="/assets/search.html-28004d8f.js" as="script"><link rel="prefetch" href="/assets/tp.html-cea7081b.js" as="script"><link rel="prefetch" href="/assets/configuration.html-b8ea020d.js" as="script"><link rel="prefetch" href="/assets/index.html-7ab9693f.js" as="script"><link rel="prefetch" href="/assets/404.html-49390272.js" as="script"><link rel="prefetch" href="/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/assets/index-82585c84.js" as="script"><link rel="prefetch" href="/assets/giscus-0b7adcf8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Justice的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/friends.md" class="" aria-label="友情链接"><!--[--><!--]--> 友情链接 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Justice996" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/friends.md" class="" aria-label="友情链接"><!--[--><!--]--> 友情链接 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Justice996" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">技术 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/js/js.md" class="sidebar-item" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/js/interview.md" class="sidebar-item" aria-label="前端面试题"><!--[--><!--]--> 前端面试题 <!--[--><!--]--></a><!----></li><li><a href="/skill/js/clean.md" class="sidebar-item" aria-label="如何清除前端缓存"><!--[--><!--]--> 如何清除前端缓存 <!--[--><!--]--></a><!----></li><li><a href="/skill/js/forceUpdate.md" class="sidebar-item" aria-label="$forceUpdate详解"><!--[--><!--]--> $forceUpdate详解 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/skill/wecom" class="sidebar-item" aria-label="企业微信开发"><!--[--><!--]--> 企业微信开发 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/wecom/configuration.md" class="sidebar-item" aria-label="如何配置本地开发环境?"><!--[--><!--]--> 如何配置本地开发环境? <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active">微信公众号开发 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/wechat/basic.md" class="sidebar-item active" aria-label="扫二维码关注公众号并获取用户-逻辑?"><!--[--><!--]--> 扫二维码关注公众号并获取用户-逻辑? <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/skill/php/" class="sidebar-item" aria-label="php"><!--[--><!--]--> php <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/php/search.md" class="sidebar-item" aria-label="关联表 一对多"><!--[--><!--]--> 关联表 一对多 <!--[--><!--]--></a><!----></li><li><a href="/skill/php/tp.md" class="sidebar-item" aria-label="tp"><!--[--><!--]--> tp <!--[--><!--]--></a><!----></li><li><a href="/skill/php/basic.md" class="sidebar-item" aria-label="php基础"><!--[--><!--]--> php基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">运维 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/DevOps/btUse.md" class="sidebar-item" aria-label="宝塔面板"><!--[--><!--]--> 宝塔面板 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">git <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/skill/git/gitBasic.md" class="sidebar-item" aria-label="git基本使用"><!--[--><!--]--> git基本使用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">生活 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/life/" class="sidebar-item" aria-label="整活"><!--[--><!--]--> 整活 <!--[--><!--]--></a><!----></li><li><a href="/life/ipad.md" class="sidebar-item" aria-label="整了台ipad"><!--[--><!--]--> 整了台ipad <!--[--><!--]--></a><!----></li><li><a href="/life/thinks.md" class="sidebar-item" aria-label="杂谈"><!--[--><!--]--> 杂谈 <!--[--><!--]--></a><!----></li><li><a href="/life/seek.md" class="sidebar-item" aria-label="寻找"><!--[--><!--]--> 寻找 <!--[--><!--]--></a><!----></li><li><a href="/life/birthday25.md" class="sidebar-item" aria-label="25岁生日"><!--[--><!--]--> 25岁生日 <!--[--><!--]--></a><!----></li><li><a href="/life/breakdown.md" class="sidebar-item" aria-label="崩溃"><!--[--><!--]--> 崩溃 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">学英语 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/english/list1.md" class="sidebar-item" aria-label="单词表1"><!--[--><!--]--> 单词表1 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">阅读 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/read/ElonReeveMuskBiography.md" class="sidebar-item" aria-label="&lt;&lt;硅谷钢铁侠：埃隆·马斯克的冒险人生&gt;&gt;"><!--[--><!--]--> &lt;&lt;硅谷钢铁侠：埃隆·马斯克的冒险人生&gt;&gt; <!--[--><!--]--></a><!----></li><li><a href="/read/TheCafeattheEndoftheWorld.md" class="sidebar-item" aria-label="&lt;&lt;世界尽头的咖啡馆&gt;&gt;"><!--[--><!--]--> &lt;&lt;世界尽头的咖啡馆&gt;&gt; <!--[--><!--]--></a><!----></li><li><a href="/read/artistsOfLife.md" class="sidebar-item" aria-label="&lt;&lt;生活的艺术家&gt;&gt;"><!--[--><!--]--> &lt;&lt;生活的艺术家&gt;&gt; <!--[--><!--]--></a><!----></li><li><a href="/read/howComputersWork.md" class="sidebar-item" aria-label="&lt;&lt;计算机是怎样跑起来的&gt;&gt;"><!--[--><!--]--> &lt;&lt;计算机是怎样跑起来的&gt;&gt; <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">娱乐 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/game/dontStrave.md" class="sidebar-item" aria-label="饥荒"><!--[--><!--]--> 饥荒 <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="http://yx.1dly.cn/" rel="noopener noreferrer" target="_blank" aria-label="怀旧游戏机"><!--[--><!--]--> 怀旧游戏机 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="做微信公众号-扫二维码关注公众号并获取用户-逻辑" tabindex="-1"><a class="header-anchor" href="#做微信公众号-扫二维码关注公众号并获取用户-逻辑" aria-hidden="true">#</a> 做微信公众号 ，扫二维码关注公众号并获取用户-逻辑</h2><blockquote><p>扫二维码关注公众号并获取用户-逻辑：<a href="http://www.demodashi.com/demo/16402.html" target="_blank" rel="noopener noreferrer">http://www.demodashi.com/demo/16402.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <br> 微信扫码登录能用代码 <a href="https://www.cnblogs.com/10zhan/p/17081299.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/10zhan/p/17081299.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br> 关注取消事件回调位置 <a href="https://blog.csdn.net/shenshao_8/article/details/127407075" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/shenshao_8/article/details/127407075<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br> 提交基础信息，就会当场样子接口<a href="https://www.freesion.com/article/63071075721/" target="_blank" rel="noopener noreferrer">https://www.freesion.com/article/63071075721/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br> 要提前写完验证代码<a href="https://www.cnblogs.com/txw1958/p/weixin-qrcode-with-parameters.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/txw1958/p/weixin-qrcode-with-parameters.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br> 回调细节-<a href="https://www.likecs.com/show-200165.html" target="_blank" rel="noopener noreferrer">https://www.likecs.com/show-200165.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br> Token验证例子微信扫码<a href="http://demo.616zf.com/api/wx/valid" target="_blank" rel="noopener noreferrer">http://demo.616zf.com/api/wx/valid<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><hr><p>准备工作<br> 准备公众号及配置<br> 本文用测试公众号进行配置举例子</p><hr><blockquote><p>接口文档 获取access_token 文档：获取access_token 生成临时带参二维码 临时带参二维码方式进行生成二维码，再采用微信事件回调进行用户信息获取。 带参二维码生成文档：生成带参二维码 用户事件回调 用户在进行扫码或其他事件，微信会进行事件回调。 微信事件回调文档：微信事件回调 获取用户详细信息 获取用户详细信息：获取用户详细信息 程序目录 <img src="https://cdn.statically.io/gh/Justice996/picx-images-hosting@master/44ae262d901fe79a8ef90a0f96fa21c.35dqrj1q0ew0.webp" alt="44ae262d901fe79a8ef90a0f96fa21c"><img src="https://cdn.statically.io/gh/Justice996/picx-images-hosting@master/636440686be7d9d63bd5ec76a8645a4.6n1dk9el5bc0.webp" alt="636440686be7d9d63bd5ec76a8645a4"></p></blockquote><hr><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>获取access_token
    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token parameter">$appid</span>
     * <span class="token keyword">@param</span> <span class="token parameter">$appsecret</span>
     *
     * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">mixed</span></span>
     * 获取token
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">getToken</span><span class="token punctuation">(</span><span class="token variable">$appid</span><span class="token punctuation">,</span> <span class="token variable">$appsecret</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&quot;</span> <span class="token operator">.</span> <span class="token variable">$appid</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&amp;secret=&quot;</span> <span class="token operator">.</span> <span class="token variable">$appsecret</span><span class="token punctuation">;</span>
        <span class="token variable">$token</span> <span class="token operator">=</span> <span class="token function">request_get</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$token</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token function">stripslashes</span><span class="token punctuation">(</span><span class="token variable">$token</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$token</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$access_token</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;access_token&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$access_token</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
获取二维码ticket
<span class="token doc-comment comment">/**
     * 获取关注二维码ticket
     * <span class="token keyword">@param</span>     <span class="token parameter">$ACCESS_TOKEN</span>
     * <span class="token keyword">@param</span>     <span class="token parameter">$fqid</span>
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token keyword">int</span></span> <span class="token parameter">$type</span>
     *
     * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">bool</span><span class="token punctuation">|</span><span class="token keyword">string</span></span>
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">getQrcodeurl</span><span class="token punctuation">(</span><span class="token variable">$ACCESS_TOKEN</span><span class="token punctuation">,</span> <span class="token variable">$fqid</span><span class="token punctuation">,</span> <span class="token variable">$type</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token variable">$qrcode_url</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;access_token=&#39;</span> <span class="token operator">.</span> <span class="token variable">$ACCESS_TOKEN</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//生成永久二维码</span>
            <span class="token variable">$qrcode</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;{&quot;action_name&quot;: &quot;QR_LIMIT_SCENE&quot;, &quot;action_info&quot;: {&quot;scene&quot;: {&quot;scene_str&quot;: &#39;</span> <span class="token operator">.</span> <span class="token variable">$fqid</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;}}}&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//生成临时二维码</span>
            <span class="token variable">$qrcode</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;{&quot;expire_seconds&quot;: 604800, &quot;action_name&quot;: &quot;QR_STR_SCENE&quot;, &quot;action_info&quot;: {&quot;scene&quot;: {&quot;scene_str&quot;: &#39;</span> <span class="token operator">.</span> <span class="token variable">$fqid</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;}}}&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">http_post_data</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token variable">$qrcode</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$oo</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$oo</span><span class="token operator">-&gt;</span><span class="token property">ticket</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$oo</span><span class="token operator">-&gt;</span><span class="token property">ticket</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">ErrorLogger</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;getQrcodeurl falied. Error Info: getQrcodeurl get failed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token variable">$qrcode_get_url</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;ticket=&#39;</span> <span class="token operator">.</span> <span class="token variable">$oo</span><span class="token operator">-&gt;</span><span class="token property">ticket</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token variable">$oo</span><span class="token operator">-&gt;</span><span class="token property">ticket</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$url</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 保存二维码到服务器
* 可直接进行展示不进行存储，看业务需求
*
* <span class="token keyword">@param</span> <span class="token parameter">$url</span>
* <span class="token keyword">@param</span> <span class="token parameter">$filestring</span>
*
* <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">bool</span><span class="token punctuation">|</span><span class="token keyword">string</span></span>
*/</span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">DownLoadQr</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token variable">$filestring</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$url</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$filename</span> <span class="token operator">=</span> <span class="token variable">$filestring</span> <span class="token operator">.</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99999999999</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;.jpg&#39;</span><span class="token punctuation">;</span>
<span class="token function">ob_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">readfile</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$img</span> <span class="token operator">=</span> <span class="token function">ob_get_contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ob_end_clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*if (!file_exists(&#39;/public/qrcode/&#39; . $filename)) {
touch(&#39;/public/qrcode/&#39; . $filename);
}*/</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token constant">PUBLIC_PATH</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;qrcode/&#39;</span> <span class="token operator">.</span> <span class="token variable">$filename</span><span class="token punctuation">;</span>
<span class="token variable">$fp2</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$fp2</span><span class="token punctuation">,</span> <span class="token variable">$img</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">ErrorLogger</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;dolwload image falied. Error Info: 无法写入图片&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$fp2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token string single-quoted-string">&#39;/public/qrcode/&#39;</span> <span class="token operator">.</span> <span class="token variable">$filename</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 微信事件推送接收方法
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">responseMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token variable">$postStr</span> <span class="token operator">=</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;HTTP_RAW_POST_DATA&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;HTTP_RAW_POST_DATA&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;php://input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$postStr</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token variable">$postObj</span> <span class="token operator">=</span> <span class="token function">simplexml_load_string</span><span class="token punctuation">(</span><span class="token variable">$postStr</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;SimpleXMLElement&#39;</span><span class="token punctuation">,</span> <span class="token constant">LIBXML_NOCDATA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 微信消息类型</span>
<span class="token variable">$RX_TYPE</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">MsgType</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$RX_TYPE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;text&quot;</span><span class="token punctuation">:</span>
<span class="token comment">// 文本消息</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">handleText</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;event&quot;</span><span class="token punctuation">:</span>
<span class="token comment">// 事件推送</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;Unknow msg type: &quot;</span> <span class="token operator">.</span> <span class="token variable">$RX_TYPE</span><span class="token punctuation">;</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token variable">$resultStr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">exit</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 微信文本消息
* <span class="token keyword">@param</span> <span class="token parameter">$postObj</span>
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handleText</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token variable">$fromUsername</span> <span class="token operator">=</span> <span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">FromUserName</span><span class="token punctuation">;</span>
<span class="token variable">$toUsername</span> <span class="token operator">=</span> <span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">ToUserName</span><span class="token punctuation">;</span>
<span class="token variable">$keyword</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">Content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$time</span> <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$textTpl</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;xml&gt;
&lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;
&lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;
&lt;CreateTime&gt;%s&lt;/CreateTime&gt;
&lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;
&lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;
&lt;FuncFlag&gt;0&lt;/FuncFlag&gt;
&lt;/xml&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$keyword</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token variable">$msgType</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;text&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;欢迎您关注&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token variable">$textTpl</span><span class="token punctuation">,</span> <span class="token variable">$fromUsername</span><span class="token punctuation">,</span> <span class="token variable">$toUsername</span><span class="token punctuation">,</span> <span class="token variable">$time</span><span class="token punctuation">,</span> <span class="token variable">$msgType</span><span class="token punctuation">,</span> <span class="token variable">$contentStr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$resultStr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;请输入...&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 获取时间消息并解析相应参数
* 提供数据简单推送(自动回复)
* <span class="token keyword">@param</span> <span class="token parameter">$object</span>
*
* <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">string</span></span>
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handleEvent</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;subscribe&quot;</span><span class="token punctuation">:</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;感谢您关注【测试账号】&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$openid</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">string</span><span class="token punctuation">)</span><span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">FromUserName</span><span class="token punctuation">;</span> <span class="token comment">//数据类型转换为字符串</span>
<span class="token variable">$refer_id</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">EventKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//$object-&gt;EventKey返回的是qrsence_1232313这种类型</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createuserinfo</span><span class="token punctuation">(</span><span class="token variable">$openid</span><span class="token punctuation">,</span> <span class="token variable">$refer_id</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取用户信息</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;SCAN&quot;</span><span class="token punctuation">:</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;您已关注过，谢谢！&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$openid</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">string</span><span class="token punctuation">)</span><span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">FromUserName</span><span class="token punctuation">;</span> <span class="token comment">//数据类型转换为字符串</span>
<span class="token variable">$refer_id</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">EventKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//$object-&gt;EventKey返回的是qrsence_12213213这种类型</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createuserinfo</span><span class="token punctuation">(</span><span class="token variable">$openid</span><span class="token punctuation">,</span> <span class="token variable">$refer_id</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取用户信息</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">responseText</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">,</span> <span class="token variable">$contentStr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$resultStr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 微信文本消息
* <span class="token keyword">@param</span> <span class="token parameter">$postObj</span>
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handleText</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token variable">$fromUsername</span> <span class="token operator">=</span> <span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">FromUserName</span><span class="token punctuation">;</span>
<span class="token variable">$toUsername</span> <span class="token operator">=</span> <span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">ToUserName</span><span class="token punctuation">;</span>
<span class="token variable">$keyword</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$postObj</span><span class="token operator">-&gt;</span><span class="token property">Content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$time</span> <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$textTpl</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;xml&gt;
&lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;
&lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;
&lt;CreateTime&gt;%s&lt;/CreateTime&gt;
&lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;
&lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;
&lt;FuncFlag&gt;0&lt;/FuncFlag&gt;
&lt;/xml&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$keyword</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token variable">$msgType</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;text&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;欢迎您关注&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token variable">$textTpl</span><span class="token punctuation">,</span> <span class="token variable">$fromUsername</span><span class="token punctuation">,</span> <span class="token variable">$toUsername</span><span class="token punctuation">,</span> <span class="token variable">$time</span><span class="token punctuation">,</span> <span class="token variable">$msgType</span><span class="token punctuation">,</span> <span class="token variable">$contentStr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$resultStr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;请输入...&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 获取时间消息并解析相应参数
* 提供数据简单推送(自动回复)
* <span class="token keyword">@param</span> <span class="token parameter">$object</span>
*
* <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">string</span></span>
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handleEvent</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;subscribe&quot;</span><span class="token punctuation">:</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;感谢您关注【测试账号】&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$openid</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">string</span><span class="token punctuation">)</span><span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">FromUserName</span><span class="token punctuation">;</span> <span class="token comment">//数据类型转换为字符串</span>
<span class="token variable">$refer_id</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">EventKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//$object-&gt;EventKey返回的是qrsence_1232313这种类型</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createuserinfo</span><span class="token punctuation">(</span><span class="token variable">$openid</span><span class="token punctuation">,</span> <span class="token variable">$refer_id</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取用户信息</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">case</span> <span class="token string double-quoted-string">&quot;SCAN&quot;</span><span class="token punctuation">:</span>
<span class="token variable">$contentStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;您已关注过，谢谢！&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$openid</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">string</span><span class="token punctuation">)</span><span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">FromUserName</span><span class="token punctuation">;</span> <span class="token comment">//数据类型转换为字符串</span>
<span class="token variable">$refer_id</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;_&#39;</span><span class="token punctuation">,</span> <span class="token variable">$object</span><span class="token operator">-&gt;</span><span class="token property">EventKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//$object-&gt;EventKey返回的是qrsence_12213213这种类型</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createuserinfo</span><span class="token punctuation">(</span><span class="token variable">$openid</span><span class="token punctuation">,</span> <span class="token variable">$refer_id</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取用户信息</span>
<span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$resultStr</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">responseText</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">,</span> <span class="token variable">$contentStr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$resultStr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1393080039@qq.com">justice</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--[--><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-cea8d733.js" defer></script>
  </body>
</html>
